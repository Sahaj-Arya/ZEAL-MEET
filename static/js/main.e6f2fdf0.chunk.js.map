{"version":3,"sources":["Video.js","Home.js","App.js","serviceWorker.js","index.js"],"names":["connections","peerConnectionConfig","iceServers","urls","socket","socketId","elms","Video","props","getPermissions","a","navigator","mediaDevices","getUserMedia","video","then","videoAvailable","catch","audio","audioAvailable","getDisplayMedia","setState","screenAvailable","stream","window","localStream","localVideoref","current","srcObject","e","console","log","getMedia","connectToSocketServer","state","getUserMediaSuccess","getTracks","forEach","track","stop","id","addStream","createOffer","description","setLocalDescription","emit","JSON","stringify","sdp","localDescription","onended","MediaStream","black","silence","blackSilence","getDislayMedia","screen","getDislayMediaSuccess","gotMessageFromServer","fromId","message","signal","parse","setRemoteDescription","RTCSessionDescription","type","createAnswer","ice","addIceCandidate","RTCIceCandidate","changeCssVideos","main","minWidth","offsetWidth","height","String","width","videos","querySelectorAll","length","style","minHeight","setProperty","io","connect","secure","on","location","href","addMessage","document","querySelector","parentNode","removeChild","getElementById","clients","socketListId","RTCPeerConnection","onicecandidate","event","candidate","onaddstream","searchVidep","cssMesure","createElement","css","maxHeight","margin","borderStyle","borderColor","objectFit","i","setAttribute","autoplay","playsinline","appendChild","undefined","id2","ctx","AudioContext","oscillator","createOscillator","dst","createMediaStreamDestination","start","resume","Object","assign","getAudioTracks","enabled","canvas","getContext","fillRect","captureStream","getVideoTracks","handleVideo","handleAudio","handleScreen","handleEndCall","openChat","showModal","newmessages","closeChat","handleMessage","target","value","data","sender","socketIdSender","prevState","messages","handleUsername","username","sendMessage","copyUrl","text","clipboard","writeText","success","error","textArea","body","focus","select","execCommand","err","askForUsername","isChrome","userAgent","toLowerCase","vendor","test","match","React","createRef","faker","internet","userName","r","this","background","padding","textAlign","marginTop","justifyContent","fontWeight","paddingRight","Input","placeholder","onChange","Button","variant","color","onClick","paddingTop","ref","autoPlay","muted","className","backgroundColor","recognition","SpeechRecognition","webkitSpeechRecognition","continuous","interimResults","lang","onend","finalTranscripts","onresult","interimTranscripts","resultIndex","results","transcript","replace","isFinal","innerHTML","onerror","startConverting","IconButton","Badge","badgeContent","max","Modal","show","onHide","zIndex","Header","closeButton","Title","Body","overflow","overflowY","map","item","index","key","wordBreak","Footer","disable","marginLeft","fontSize","Row","Component","Home","handleChange","url","join","split","Math","random","toString","substring","marginBottom","App","path","exact","component","Boolean","hostname","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e6f2fdf0.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport faker from \"faker\";\r\n\r\nimport { IconButton, Badge, Input, Button } from \"@material-ui/core\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\r\nimport MicIcon from \"@material-ui/icons/Mic\";\r\nimport MicOffIcon from \"@material-ui/icons/MicOff\";\r\nimport ScreenShareIcon from \"@material-ui/icons/ScreenShare\";\r\nimport StopScreenShareIcon from \"@material-ui/icons/StopScreenShare\";\r\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\n\r\nimport { message } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\n\r\nimport { Row } from \"reactstrap\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"./Video.css\";\r\n\r\nconst server_url =\r\n  process.env.NODE_ENV === \"production\"\r\n    ? \"https://video.sebastienbiollo.com\"\r\n    : \"http://localhost:4001\";\r\n\r\nvar connections = {};\r\nconst peerConnectionConfig = {\r\n  iceServers: [\r\n    // { 'urls': 'stun:stun.services.mozilla.com' },\r\n    { urls: \"stun:stun.l.google.com:19302\" },\r\n  ],\r\n};\r\nvar socket = null;\r\nvar socketId = null;\r\nvar elms = 0;\r\n\r\nclass Video extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.localVideoref = React.createRef();\r\n\r\n    this.videoAvailable = false;\r\n    this.audioAvailable = false;\r\n\r\n    this.state = {\r\n      video: false,\r\n      audio: false,\r\n      screen: false,\r\n      showModal: false,\r\n      screenAvailable: false,\r\n      messages: [],\r\n      message: \"\",\r\n      newmessages: 0,\r\n      askForUsername: true,\r\n      username: faker.internet.userName(),\r\n    };\r\n    connections = {};\r\n\r\n    this.getPermissions();\r\n  }\r\n\r\n  getPermissions = async () => {\r\n    try {\r\n      await navigator.mediaDevices\r\n        .getUserMedia({ video: true })\r\n        .then(() => (this.videoAvailable = true))\r\n        .catch(() => (this.videoAvailable = false));\r\n\r\n      await navigator.mediaDevices\r\n        .getUserMedia({ audio: true })\r\n        .then(() => (this.audioAvailable = true))\r\n        .catch(() => (this.audioAvailable = false));\r\n\r\n      if (navigator.mediaDevices.getDisplayMedia) {\r\n        this.setState({ screenAvailable: true });\r\n      } else {\r\n        this.setState({ screenAvailable: false });\r\n      }\r\n\r\n      if (this.videoAvailable || this.audioAvailable) {\r\n        navigator.mediaDevices\r\n          .getUserMedia({\r\n            video: this.videoAvailable,\r\n            audio: this.audioAvailable,\r\n          })\r\n          .then((stream) => {\r\n            window.localStream = stream;\r\n            this.localVideoref.current.srcObject = stream;\r\n          })\r\n          .then((stream) => {})\r\n          .catch((e) => console.log(e));\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  getMedia = () => {\r\n    this.setState(\r\n      {\r\n        video: this.videoAvailable,\r\n        audio: this.audioAvailable,\r\n      },\r\n      () => {\r\n        this.getUserMedia();\r\n        this.connectToSocketServer();\r\n      }\r\n    );\r\n  };\r\n\r\n  getUserMedia = () => {\r\n    if (\r\n      (this.state.video && this.videoAvailable) ||\r\n      (this.state.audio && this.audioAvailable)\r\n    ) {\r\n      navigator.mediaDevices\r\n        .getUserMedia({ video: this.state.video, audio: this.state.audio })\r\n        .then(this.getUserMediaSuccess)\r\n        .then((stream) => {})\r\n        .catch((e) => console.log(e));\r\n    } else {\r\n      try {\r\n        let tracks = this.localVideoref.current.srcObject.getTracks();\r\n        tracks.forEach((track) => track.stop());\r\n      } catch (e) {}\r\n    }\r\n  };\r\n\r\n  getUserMediaSuccess = (stream) => {\r\n    try {\r\n      window.localStream.getTracks().forEach((track) => track.stop());\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n\r\n    window.localStream = stream;\r\n    this.localVideoref.current.srcObject = stream;\r\n\r\n    for (let id in connections) {\r\n      if (id === socketId) continue;\r\n\r\n      connections[id].addStream(window.localStream);\r\n\r\n      connections[id].createOffer().then((description) => {\r\n        connections[id]\r\n          .setLocalDescription(description)\r\n          .then(() => {\r\n            socket.emit(\r\n              \"signal\",\r\n              id,\r\n              JSON.stringify({ sdp: connections[id].localDescription })\r\n            );\r\n          })\r\n          .catch((e) => console.log(e));\r\n      });\r\n    }\r\n\r\n    stream.getTracks().forEach(\r\n      (track) =>\r\n        (track.onended = () => {\r\n          this.setState(\r\n            {\r\n              video: false,\r\n              audio: false,\r\n            },\r\n            () => {\r\n              try {\r\n                let tracks = this.localVideoref.current.srcObject.getTracks();\r\n                tracks.forEach((track) => track.stop());\r\n              } catch (e) {\r\n                console.log(e);\r\n              }\r\n\r\n              let blackSilence = (...args) =>\r\n                new MediaStream([this.black(...args), this.silence()]);\r\n              window.localStream = blackSilence();\r\n              this.localVideoref.current.srcObject = window.localStream;\r\n\r\n              for (let id in connections) {\r\n                connections[id].addStream(window.localStream);\r\n\r\n                connections[id].createOffer().then((description) => {\r\n                  connections[id]\r\n                    .setLocalDescription(description)\r\n                    .then(() => {\r\n                      socket.emit(\r\n                        \"signal\",\r\n                        id,\r\n                        JSON.stringify({\r\n                          sdp: connections[id].localDescription,\r\n                        })\r\n                      );\r\n                    })\r\n                    .catch((e) => console.log(e));\r\n                });\r\n              }\r\n            }\r\n          );\r\n        })\r\n    );\r\n  };\r\n\r\n  getDislayMedia = () => {\r\n    if (this.state.screen) {\r\n      if (navigator.mediaDevices.getDisplayMedia) {\r\n        navigator.mediaDevices\r\n          .getDisplayMedia({ video: true, audio: true })\r\n          .then(this.getDislayMediaSuccess)\r\n          .then((stream) => {})\r\n          .catch((e) => console.log(e));\r\n      }\r\n    }\r\n  };\r\n\r\n  getDislayMediaSuccess = (stream) => {\r\n    try {\r\n      window.localStream.getTracks().forEach((track) => track.stop());\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n\r\n    window.localStream = stream;\r\n    this.localVideoref.current.srcObject = stream;\r\n\r\n    for (let id in connections) {\r\n      if (id === socketId) continue;\r\n\r\n      connections[id].addStream(window.localStream);\r\n\r\n      connections[id].createOffer().then((description) => {\r\n        connections[id]\r\n          .setLocalDescription(description)\r\n          .then(() => {\r\n            socket.emit(\r\n              \"signal\",\r\n              id,\r\n              JSON.stringify({ sdp: connections[id].localDescription })\r\n            );\r\n          })\r\n          .catch((e) => console.log(e));\r\n      });\r\n    }\r\n\r\n    stream.getTracks().forEach(\r\n      (track) =>\r\n        (track.onended = () => {\r\n          this.setState(\r\n            {\r\n              screen: false,\r\n            },\r\n            () => {\r\n              try {\r\n                let tracks = this.localVideoref.current.srcObject.getTracks();\r\n                tracks.forEach((track) => track.stop());\r\n              } catch (e) {\r\n                console.log(e);\r\n              }\r\n\r\n              let blackSilence = (...args) =>\r\n                new MediaStream([this.black(...args), this.silence()]);\r\n              window.localStream = blackSilence();\r\n              this.localVideoref.current.srcObject = window.localStream;\r\n\r\n              this.getUserMedia();\r\n            }\r\n          );\r\n        })\r\n    );\r\n  };\r\n\r\n  gotMessageFromServer = (fromId, message) => {\r\n    var signal = JSON.parse(message);\r\n\r\n    if (fromId !== socketId) {\r\n      if (signal.sdp) {\r\n        connections[fromId]\r\n          .setRemoteDescription(new RTCSessionDescription(signal.sdp))\r\n          .then(() => {\r\n            if (signal.sdp.type === \"offer\") {\r\n              connections[fromId]\r\n                .createAnswer()\r\n                .then((description) => {\r\n                  connections[fromId]\r\n                    .setLocalDescription(description)\r\n                    .then(() => {\r\n                      socket.emit(\r\n                        \"signal\",\r\n                        fromId,\r\n                        JSON.stringify({\r\n                          sdp: connections[fromId].localDescription,\r\n                        })\r\n                      );\r\n                    })\r\n                    .catch((e) => console.log(e));\r\n                })\r\n                .catch((e) => console.log(e));\r\n            }\r\n          })\r\n          .catch((e) => console.log(e));\r\n      }\r\n\r\n      if (signal.ice) {\r\n        connections[fromId]\r\n          .addIceCandidate(new RTCIceCandidate(signal.ice))\r\n          .catch((e) => console.log(e));\r\n      }\r\n    }\r\n  };\r\n\r\n  changeCssVideos = (main) => {\r\n    let widthMain = main.offsetWidth;\r\n    let minWidth = \"30%\";\r\n    if ((widthMain * 30) / 100 < 300) {\r\n      minWidth = \"300px\";\r\n    }\r\n    let minHeight = \"40%\";\r\n\r\n    let height = String(100 / elms) + \"%\";\r\n    let width = \"\";\r\n    if (elms === 0 || elms === 1) {\r\n      width = \"100%\";\r\n      height = \"100%\";\r\n    } else if (elms === 2) {\r\n      width = \"45%\";\r\n      height = \"100%\";\r\n    } else if (elms === 3 || elms === 4) {\r\n      width = \"35%\";\r\n      height = \"50%\";\r\n    } else {\r\n      width = String(100 / elms) + \"%\";\r\n    }\r\n\r\n    let videos = main.querySelectorAll(\"video\");\r\n    for (let a = 0; a < videos.length; ++a) {\r\n      videos[a].style.minWidth = minWidth;\r\n      videos[a].style.minHeight = minHeight;\r\n      videos[a].style.setProperty(\"width\", width);\r\n      videos[a].style.setProperty(\"height\", height);\r\n    }\r\n\r\n    return { minWidth, minHeight, width, height };\r\n  };\r\n\r\n  connectToSocketServer = () => {\r\n    socket = io.connect(server_url, { secure: true });\r\n\r\n    socket.on(\"signal\", this.gotMessageFromServer);\r\n\r\n    socket.on(\"connect\", () => {\r\n      socket.emit(\"join-call\", window.location.href);\r\n      socketId = socket.id;\r\n\r\n      socket.on(\"chat-message\", this.addMessage);\r\n\r\n      socket.on(\"user-left\", (id) => {\r\n        let video = document.querySelector(`[data-socket=\"${id}\"]`);\r\n        if (video !== null) {\r\n          elms--;\r\n          video.parentNode.removeChild(video);\r\n\r\n          let main = document.getElementById(\"main\");\r\n          this.changeCssVideos(main);\r\n        }\r\n      });\r\n\r\n      socket.on(\"user-joined\", (id, clients) => {\r\n        clients.forEach((socketListId) => {\r\n          connections[socketListId] = new RTCPeerConnection(\r\n            peerConnectionConfig\r\n          );\r\n          // Wait for their ice candidate\r\n          connections[socketListId].onicecandidate = function (event) {\r\n            if (event.candidate != null) {\r\n              socket.emit(\r\n                \"signal\",\r\n                socketListId,\r\n                JSON.stringify({ ice: event.candidate })\r\n              );\r\n            }\r\n          };\r\n\r\n          // Wait for their video stream\r\n          connections[socketListId].onaddstream = (event) => {\r\n            // TODO mute button, full screen button\r\n            var searchVidep = document.querySelector(\r\n              `[data-socket=\"${socketListId}\"]`\r\n            );\r\n            if (searchVidep !== null) {\r\n              // if i don't do this check it make an empyt square\r\n              searchVidep.srcObject = event.stream;\r\n            } else {\r\n              elms = clients.length;\r\n              let main = document.getElementById(\"main\");\r\n              let cssMesure = this.changeCssVideos(main);\r\n\r\n              let video = document.createElement(\"video\");\r\n\r\n              let css = {\r\n                minWidth: cssMesure.minWidth,\r\n                minHeight: cssMesure.minHeight,\r\n                maxHeight: \"100%\",\r\n                margin: \"10px\",\r\n                borderStyle: \"solid\",\r\n                borderColor: \"#bdbdbd\",\r\n                objectFit: \"fill\",\r\n              };\r\n              for (let i in css) video.style[i] = css[i];\r\n\r\n              video.style.setProperty(\"width\", cssMesure.width);\r\n              video.style.setProperty(\"height\", cssMesure.height);\r\n              video.setAttribute(\"data-socket\", socketListId);\r\n              video.srcObject = event.stream;\r\n              video.autoplay = true;\r\n              video.playsinline = true;\r\n\r\n              main.appendChild(video);\r\n            }\r\n          };\r\n\r\n          // Add the local video stream\r\n          if (window.localStream !== undefined && window.localStream !== null) {\r\n            connections[socketListId].addStream(window.localStream);\r\n          } else {\r\n            let blackSilence = (...args) =>\r\n              new MediaStream([this.black(...args), this.silence()]);\r\n            window.localStream = blackSilence();\r\n            connections[socketListId].addStream(window.localStream);\r\n          }\r\n        });\r\n\r\n        if (id === socketId) {\r\n          for (let id2 in connections) {\r\n            if (id2 === socketId) continue;\r\n\r\n            try {\r\n              connections[id2].addStream(window.localStream);\r\n            } catch (e) {}\r\n\r\n            connections[id2].createOffer().then((description) => {\r\n              connections[id2]\r\n                .setLocalDescription(description)\r\n                .then(() => {\r\n                  socket.emit(\r\n                    \"signal\",\r\n                    id2,\r\n                    JSON.stringify({ sdp: connections[id2].localDescription })\r\n                  );\r\n                })\r\n                .catch((e) => console.log(e));\r\n            });\r\n          }\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  silence = () => {\r\n    let ctx = new AudioContext();\r\n    let oscillator = ctx.createOscillator();\r\n    let dst = oscillator.connect(ctx.createMediaStreamDestination());\r\n    oscillator.start();\r\n    ctx.resume();\r\n    return Object.assign(dst.stream.getAudioTracks()[0], { enabled: false });\r\n  };\r\n  black = ({ width = 640, height = 480 } = {}) => {\r\n    let canvas = Object.assign(document.createElement(\"canvas\"), {\r\n      width,\r\n      height,\r\n    });\r\n    canvas.getContext(\"2d\").fillRect(0, 0, width, height);\r\n    let stream = canvas.captureStream();\r\n    return Object.assign(stream.getVideoTracks()[0], { enabled: false });\r\n  };\r\n\r\n  handleVideo = () =>\r\n    this.setState({ video: !this.state.video }, () => this.getUserMedia());\r\n  handleAudio = () =>\r\n    this.setState({ audio: !this.state.audio }, () => this.getUserMedia());\r\n  handleScreen = () =>\r\n    this.setState({ screen: !this.state.screen }, () => this.getDislayMedia());\r\n\r\n  handleEndCall = () => {\r\n    try {\r\n      let tracks = this.localVideoref.current.srcObject.getTracks();\r\n      tracks.forEach((track) => track.stop());\r\n    } catch (e) {}\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  openChat = () => this.setState({ showModal: true, newmessages: 0 });\r\n  closeChat = () => this.setState({ showModal: false });\r\n  handleMessage = (e) => this.setState({ message: e.target.value });\r\n\r\n  addMessage = (data, sender, socketIdSender) => {\r\n    this.setState((prevState) => ({\r\n      messages: [...prevState.messages, { sender: sender, data: data }],\r\n    }));\r\n    if (socketIdSender !== socketId) {\r\n      this.setState({ newmessages: this.state.newmessages + 1 });\r\n    }\r\n  };\r\n\r\n  handleUsername = (e) => this.setState({ username: e.target.value });\r\n\r\n  sendMessage = () => {\r\n    socket.emit(\"chat-message\", this.state.message, this.state.username);\r\n    this.setState({ message: \"\", sender: this.state.username });\r\n  };\r\n\r\n  copyUrl = () => {\r\n    let text = window.location.href;\r\n    if (!navigator.clipboard) {\r\n      let textArea = document.createElement(\"textarea\");\r\n      textArea.value = text;\r\n      document.body.appendChild(textArea);\r\n      textArea.focus();\r\n      textArea.select();\r\n      try {\r\n        document.execCommand(\"copy\");\r\n        message.success(\"Link copied to clipboard!\");\r\n      } catch (err) {\r\n        message.error(\"Failed to copy\");\r\n      }\r\n      document.body.removeChild(textArea);\r\n      return;\r\n    }\r\n    navigator.clipboard.writeText(text).then(\r\n      function () {\r\n        message.success(\"Link copied to clipboard!\");\r\n      },\r\n      () => {\r\n        message.error(\"Failed to copy\");\r\n      }\r\n    );\r\n  };\r\n\r\n  connect = () =>\r\n    this.setState({ askForUsername: false }, () => this.getMedia());\r\n\r\n  isChrome = function () {\r\n    let userAgent = (navigator && (navigator.userAgent || \"\")).toLowerCase();\r\n    let vendor = (navigator && (navigator.vendor || \"\")).toLowerCase();\r\n    let matchChrome = /google inc/.test(vendor)\r\n      ? userAgent.match(/(?:chrome|crios)\\/(\\d+)/)\r\n      : null;\r\n    // let matchFirefox = userAgent.match(/(?:firefox|fxios)\\/(\\d+)/)\r\n    // return matchChrome !== null || matchFirefox !== null\r\n    return matchChrome !== null;\r\n  };\r\n\r\n  render() {\r\n    var r = document.getElementById(\"result\");\r\n\r\n    const startConverting = () => {\r\n      // debugger;\r\n\r\n      if (\"webkitSpeechRecognition\" in window) {\r\n        var SpeechRecognition = window.webkitSpeechRecognition;\r\n        var recognition = new SpeechRecognition();\r\n        // var speechRecognizer = new webkitSpeechRecognition();\r\n        recognition.continuous = true;\r\n        recognition.interimResults = true;\r\n        recognition.lang = \"en-IN\";\r\n        recognition.start();\r\n        // recognition.onstart = function () {\r\n        //    alert('Voice recognition is ON.');\r\n        // };\r\n        recognition.onend = function () {\r\n          recognition.start();\r\n        };\r\n\r\n        //  alert('ha');\r\n        var finalTranscripts = \"\";\r\n        recognition.onresult = function (event) {\r\n          var interimTranscripts = \"\";\r\n          for (var i = event.resultIndex; i < event.results.length; i++) {\r\n            var transcript = event.results[i][0].transcript;\r\n            transcript.replace(\"\\n\", \"<br>\");\r\n            if (event.results[i].isFinal) {\r\n              finalTranscripts += transcript;\r\n            } else {\r\n              interimTranscripts += transcript;\r\n            }\r\n          }\r\n          r.innerHTML =\r\n            finalTranscripts +\r\n            '<span stype=\"color:#999\">' +\r\n            interimTranscripts +\r\n            \"</span>\";\r\n        };\r\n\r\n        recognition.onerror = function (event) {};\r\n      } else {\r\n        r.innerHTML = \"Your browser not supported\";\r\n      }\r\n    };\r\n\r\n    if (this.isChrome() === false) {\r\n      return (\r\n        <div\r\n          style={{\r\n            background: \"white\",\r\n            width: \"30%\",\r\n            height: \"auto\",\r\n            padding: \"20px\",\r\n            minWidth: \"400px\",\r\n            textAlign: \"center\",\r\n            margin: \"auto\",\r\n            marginTop: \"50px\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          <h1>Sorry, this works only with Google Chrome</h1>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n        {this.state.askForUsername === true ? (\r\n          <div>\r\n            <div\r\n              style={{\r\n                background: \"white\",\r\n                width: \"30%\",\r\n                height: \"auto\",\r\n                padding: \"20px\",\r\n                minWidth: \"400px\",\r\n                textAlign: \"center\",\r\n                margin: \"auto\",\r\n                marginTop: \"50px\",\r\n                justifyContent: \"center\",\r\n              }}\r\n            >\r\n              <p\r\n                style={{ margin: 0, fontWeight: \"bold\", paddingRight: \"50px\" }}\r\n              >\r\n                Set your username\r\n              </p>\r\n              <Input\r\n                placeholder=\"Username\"\r\n                value={this.state.username}\r\n                onChange={(e) => this.handleUsername(e)}\r\n              />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={this.connect}\r\n                style={{ margin: \"20px\" }}\r\n              >\r\n                Connect\r\n              </Button>\r\n            </div>\r\n\r\n            <div\r\n              style={{\r\n                justifyContent: \"center\",\r\n                textAlign: \"center\",\r\n                paddingTop: \"40px\",\r\n              }}\r\n            >\r\n              <video\r\n                id=\"my-video\"\r\n                ref={this.localVideoref}\r\n                autoPlay\r\n                muted\r\n                style={{\r\n                  borderStyle: \"solid\",\r\n                  borderColor: \"#bdbdbd\",\r\n                  objectFit: \"fill\",\r\n                  width: \"60%\",\r\n                  height: \"30%\",\r\n                }}\r\n              ></video>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <div\r\n              className=\"btn-down\"\r\n              style={{\r\n                backgroundColor: \"whitesmoke\",\r\n                color: \"whitesmoke\",\r\n                textAlign: \"center\",\r\n              }}\r\n            >\r\n              <button\r\n                style={{ color: \"#424242\" }}\r\n                onClick={() => startConverting()}\r\n              >\r\n                TRANSLATE\r\n              </button>\r\n\r\n              <IconButton\r\n                style={{ color: \"#424242\" }}\r\n                onClick={this.handleVideo}\r\n              >\r\n                {this.state.video === true ? (\r\n                  <VideocamIcon />\r\n                ) : (\r\n                  <VideocamOffIcon />\r\n                )}\r\n              </IconButton>\r\n\r\n              <IconButton\r\n                style={{ color: \"#f44336\" }}\r\n                onClick={this.handleEndCall}\r\n              >\r\n                <CallEndIcon />\r\n              </IconButton>\r\n\r\n              <IconButton\r\n                style={{ color: \"#424242\" }}\r\n                onClick={this.handleAudio}\r\n              >\r\n                {this.state.audio === true ? <MicIcon /> : <MicOffIcon />}\r\n              </IconButton>\r\n\r\n              {this.state.screenAvailable === true ? (\r\n                <IconButton\r\n                  style={{ color: \"#424242\" }}\r\n                  onClick={this.handleScreen}\r\n                >\r\n                  {this.state.screen === true ? (\r\n                    <ScreenShareIcon />\r\n                  ) : (\r\n                    <StopScreenShareIcon />\r\n                  )}\r\n                </IconButton>\r\n              ) : null}\r\n\r\n              <Badge\r\n                badgeContent={this.state.newmessages}\r\n                max={999}\r\n                color=\"secondary\"\r\n                onClick={this.openChat}\r\n              >\r\n                <IconButton\r\n                  style={{ color: \"#424242\" }}\r\n                  onClick={this.openChat}\r\n                >\r\n                  <ChatIcon />\r\n                </IconButton>\r\n              </Badge>\r\n            </div>\r\n\r\n            <Modal\r\n              show={this.state.showModal}\r\n              onHide={this.closeChat}\r\n              style={{ zIndex: \"999999\" }}\r\n            >\r\n              <Modal.Header closeButton>\r\n                <Modal.Title>Chat Room</Modal.Title>\r\n              </Modal.Header>\r\n              <Modal.Body\r\n                style={{\r\n                  overflow: \"auto\",\r\n                  overflowY: \"auto\",\r\n                  height: \"400px\",\r\n                  textAlign: \"left\",\r\n                }}\r\n              >\r\n                {this.state.messages.length > 0 ? (\r\n                  this.state.messages.map((item, index) => (\r\n                    <div key={index} style={{ textAlign: \"left\" }}>\r\n                      <p style={{ wordBreak: \"break-all\" }}>\r\n                        <b>{item.sender}</b>: {item.data}\r\n                      </p>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <p>No message yet</p>\r\n                )}\r\n              </Modal.Body>\r\n              <Modal.Footer className=\"div-send-msg\">\r\n                <Input\r\n                  placeholder=\"Message\"\r\n                  value={this.state.message}\r\n                  onChange={(e) => this.handleMessage(e)}\r\n                />\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  onClick={this.sendMessage}\r\n                >\r\n                  Send\r\n                </Button>\r\n              </Modal.Footer>\r\n            </Modal>\r\n\r\n            <div className=\"container\">\r\n              <div style={{ paddingTop: \"20px\" }}>\r\n                <Input value={window.location.href} disable=\"true\"></Input>\r\n                <Button\r\n                  style={{\r\n                    backgroundColor: \"#3f51b5\",\r\n                    color: \"whitesmoke\",\r\n                    marginLeft: \"20px\",\r\n                    marginTop: \"10px\",\r\n                    width: \"120px\",\r\n                    fontSize: \"10px\",\r\n                  }}\r\n                  onClick={this.copyUrl}\r\n                >\r\n                  Copy invite link\r\n                </Button>\r\n              </div>\r\n              <div id=\"result\"></div>\r\n              <Row\r\n                id=\"main\"\r\n                className=\"flex-container\"\r\n                style={{ margin: 0, padding: 0 }}\r\n              >\r\n                <video\r\n                  id=\"my-video\"\r\n                  ref={this.localVideoref}\r\n                  autoPlay\r\n                  muted\r\n                  style={{\r\n                    borderStyle: \"solid\",\r\n                    borderColor: \"#bdbdbd\",\r\n                    margin: \"10px\",\r\n                    objectFit: \"fill\",\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                  }}\r\n                ></video>\r\n              </Row>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Video;\r\n","import React, { Component } from 'react';\r\nimport { Input, Button, IconButton } from '@material-ui/core';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport \"./Home.css\"\r\n\r\nclass Home extends Component {\r\n  \tconstructor (props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\turl: ''\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange = (e) => this.setState({ url: e.target.value })\r\n\r\n\tjoin = () => {\r\n\t\tif (this.state.url !== \"\") {\r\n\t\t\tvar url = this.state.url.split(\"/\")\r\n\t\t\twindow.location.href = `/${url[url.length-1]}`\r\n\t\t} else {\r\n\t\t\tvar url = Math.random().toString(36).substring(2, 7)\r\n\t\t\twindow.location.href = `/${url}`\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container2\">\r\n\t\t\t\t<div style={{fontSize: \"14px\", background: \"white\", width: \"10%\", textAlign: \"center\", margin: \"auto\", marginBottom: \"10px\"}}>\r\n\t\t\t\t\tSource code: \r\n\t\t\t\t\t<IconButton style={{color: \"black\"}} onClick={() => window.location.href=\"https://github.com/0x5eba/Video-Meeting\"}>\r\n\t\t\t\t\t\t<GitHubIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h1 style={{ fontSize: \"45px\" }}>Video Meeting</h1>\r\n\t\t\t\t\t<p style={{ fontWeight: \"200\" }}>Video conference website that lets you stay in touch with all your friends.</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tbackground: \"white\", width: \"30%\", height: \"auto\", padding: \"20px\", minWidth: \"400px\",\r\n\t\t\t\t\ttextAlign: \"center\", margin: \"auto\", marginTop: \"100px\"\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<p style={{ margin: 0, fontWeight: \"bold\", paddingRight: \"50px\" }}>Start or join a meeting</p>\r\n\t\t\t\t\t<Input placeholder=\"URL\" onChange={e => this.handleChange(e)} />\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.join} style={{ margin: \"20px\" }}>Go</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Home;","import React, { Component } from \"react\";\r\nimport Video from \"./Video\";\r\nimport Home from \"./Home\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Router>\r\n          <Switch>\r\n            <Route path=\"/home\" exact component={Home} />\r\n            <Route path=\"/:url\" component={Video} />\r\n          </Switch>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t// [::1] is the IPv6 localhost address.\r\n\twindow.location.hostname === '[::1]' ||\r\n\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\twindow.location.hostname.match(\r\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { 'Service-Worker': 'script' },\r\n\t})\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready\r\n\t\t\t.then(registration => {\r\n\t\t\t\tregistration.unregister();\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.error(error.message);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n\t<App />,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}